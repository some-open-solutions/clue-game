
<html>
<head>
<style>
.room_class{
  position: absolute;
  width:100px;
  height:100px;
  border-radius:50px;
  background-color:mediumBlue;
}

#grid_table{
  display:none;
}
  body {
    background-color: #ffcc00;
}
</style>
  <title>
    Clue
  </title>
  <script src="libraries/jquery-3.5.1.min.js"></script>
  <script src="libraries/bootbox.5.5.2.min.js"></script>
  <script src="libraries/bootstrap.4.5.3.min.js"></script>
  <script src="libraries/papaparse.min.js"></script>
  <link rel="stylesheet" href="libraries/bootstrap.4.5.3.min.css"></link>

</head>
<body>

<div id="welcome_page">
  <div class="jumbotron">
  <h1 style="color: #5e9ca0;">Welcome to Connect the Clues </h1>
  <p class="lead"></p>


  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_0" placeholder="Anthony" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_1" placeholder="Brendan" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_2" placeholder="Lily" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_3" placeholder="Nico" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_4" placeholder="Rich" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_5" placeholder="Thalia" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" >Character name</span>
    </div>
    <input type="text" class="form-control" id="player_name_6" placeholder="Zola" aria-label="Username" aria-describedby="basic-addon1">

    <select class="player_color_select form-control form-control">
      <option>Not playing (select color to play)</option>
      <option>Pink</option>
      <option>Blue</option>
      <option>Red</option>
    </select>
  </div>



  <hr class="my-4">


    <p class="lead">
      <a class="btn btn-primary btn-lg" role="button" id="start_game_btn">Start game</a>
    </p>
  </div>
</div>

<div id="grid_table"></div>

</body>
</html>



<script type="text/javascript">



var clue_object = {
  characters: [],
  rooms: [
    {
      room:"studio",
      color: "red",
      coordinates: {
        x_start: 0,
        x_end: 5,
        y_start: 0,
        y_end: 3
      }
    },
    {
      room: "anticamera",
      color: "red",
      coordinates:{
        x_start: 8,
        x_end: 13,
        y_start: 0,
        y_end: 6
      }
    },
    {
      room:"veranda",
      color: "red",
      coordinates: {
        x_start: 16,
        x_end: 21,
        y_start: 0,
        y_end: 5
      }
    },
    {
      room:"biblioteca",
      color: "red",
      coordinates: {
        x_start: 0,
        x_end: 5,
        y_start: 5,
        y_end: 10
      }
     },
    {
      room:"finale",
      color: "red",
      coordinates: {
        x_start: 8,
        x_end: 12,
        y_start: 7,
        y_end: 14
      }
    },
    {
      room:"sala_pranzo",
      color: "red",
      coordinates: {
        x_start: 15,
        x_end: 21,
        y_start: 8,
        y_end: 15
      }
    },
    {
      room:"sala_biliardo" ,
      color: "red",
      coordinates: {
        x_start: 0,
        x_end: 4,
        y_start: 11,
        y_end: 16
      }
    },
    {
      room:"salotto",
      color: "red",
      coordinates: {
        x_start: 0,
        x_end: 4,
        y_start: 18,
        y_end: 23
      }
    },
    {
      room:"sala_ballo",
      color: "yellow",
      coordinates: {
        x_start: 7,
        x_end: 14,
        y_start: 16,
        y_end: 23
      }
    },
    {
      room:"cucina",
      color: "orange",
      coordinates: {
        x_start: 17,
        x_end: 21,
        y_start: 17,
        y_end: 23
      }
    }
  ]
}

$("#start_game_btn").on("click", function(){

  $(".player_color_select").forEach(function(item){
    console.log(item);
  });

  $("#welcome_page").fadeOut(1000, function(){
    $("#grid_table").fadeIn(1000);
  });
});

function in_room(x,y){
  var is_in_room = false;

  clue_object.rooms.forEach((row, i) => {

    if(
      x >= row.coordinates["x_start"] &&
      y >= row.coordinates["y_start"] &&
      x <= row.coordinates["x_end"] &&
      y < row.coordinates["y_end"]
    ){
      is_in_room = true;
    }
  });
  return is_in_room;

}

function start_room(x,y){
  var is_start_room = false;

  clue_object.rooms.forEach((row, i) => {

    if(
      x == row.coordinates["x_start"] &&
      y == row.coordinates["y_start"]
    ){
      is_start_room = row;
    }
  });
  return is_start_room;

}

  var grid_html = "<table>";
  // i is for the rows
  for (var y = 0; y < 23; y++) {
    grid_html += "<tr>";

    // j is for the columns
    for (var x = 0; x < 22; x++) {
      var room_style = "";
      var room_dimensions = "";
      var room_border = "border-style: solid;";

      if (start_room(x,y)){
        var this_room = start_room(x,y);

        room_style = "background-color: "+ this_room.color +";";
        room_border = "";

        var rowspan = this_room.coordinates.y_end - this_room.coordinates.y_start;
        var colspan = this_room.coordinates.x_end - this_room.coordinates.x_start + 1;

        room_dimensions = "colspan='"+colspan+"' rowspan='"+rowspan+"'";

        grid_html += "<td " +room_dimensions+ "style = 'width: 50px; height:50px; "+room_border+"; "+room_style+"'><h3 class='text-white'>"+this_room.room+"</h3></td>";

      } else if (in_room(x,y)) {

      } else {
        grid_html += "<td " +room_dimensions+ "style = 'width: 50px; height:50px; "+room_border+"; "+room_style+"'>" + y + "-" + x +  "</td>";
      }
    }
    grid_html += "</tr>";
  }
  grid_html += "</table>";
  $("#grid_table").html(grid_html);
</script>
